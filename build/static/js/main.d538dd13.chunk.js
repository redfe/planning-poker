(this["webpackJsonpplanning-poker"]=this["webpackJsonpplanning-poker"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(1),i=n(2),s=n(4),c=n(3),o=n(0),l=n.n(o),u=n(7),p=n.n(u),m=n(8),d=n(19),h=(n(18),["0","1","2","3","5","8","13","21","34","55","?","\u221e"]),v=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.point,t="card"+(this.props.isSelected?" selected":"");return l.a.createElement("div",{className:t,onClick:this.props.handleClick},e)}}]),n}(l.a.Component),f=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=h.map((function(t){var n=e.props.mySelectedPoint===t;return l.a.createElement(v,{isSelected:n,key:t,point:t,handleClick:function(){return e.props.handleSelectionCardClick(t)}})}));return l.a.createElement("div",{className:"selection"},t)}}]),n}(l.a.Component),O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"user"},this.props.name)}}]),n}(l.a.Component),b=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"createCopyText",value:function(){var e=this.props.estimaters;if(0===e.length)return"empty.";var t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+e.sort((function(e,t){return e.name>t.name?1:-1})).reduce((function(e,t){return(e?e+" ":"")+"".concat(t.name,"(").concat(t.point,")")}),null)}},{key:"render",value:function(){var e=this,t=this.props.isOpend,n=this.props.estimaters.map((function(e){return l.a.createElement(y,{key:e.name,name:e.name,point:e.point,isOpend:t})}));return l.a.createElement("div",{className:"table"},l.a.createElement("div",{className:"estimaters"},n),l.a.createElement(C,{isOpend:t,handleClick:function(){return e.props.handleOpenButtonClick()}}),t&&n.length>0?l.a.createElement(k,{text:this.createCopyText()}):null)}}]),n}(l.a.Component),k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return l.a.createElement(m.CopyToClipboard,{text:this.props.text},l.a.createElement("div",{className:"copy-button"},"Copy"))}}]),n}(l.a.Component),y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.isOpend?this.props.point:void 0,t="estimater "+(this.props.isOpend?"opend":"closed");return l.a.createElement("div",{className:t},l.a.createElement(v,{point:e}),l.a.createElement("div",{className:"estimater-name"},this.props.name))}}]),n}(l.a.Component),C=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"open-button",onClick:function(){return e.props.handleClick()}},this.props.isOpend?"return":"open")}}]),n}(l.a.Component),j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;Object(r.a)(this,n),(i=t.call(this,e)).eventSubscribers={select:function(e){var t=i.state.estimaters.slice(),n=t.find((function(t){return t.name===e.name}));n||(n={name:e.name},t[t.length]=n),n.point=e.point,i.setState({estimaters:t})},unselect:function(e){var t=i.state.estimaters.filter((function(t){return t.name!==e.name}));i.setState({estimaters:t})},open:function(e){i.setState({isOpend:!0})},return:function(e){i.setState({estimaters:[],isOpend:!1})}};for(var s=void 0;!s;)s=window.prompt("your name");var c,o=(c=i.getSetupedRoomId(),window.io("https://simple-websocket-server.herokuapp.com/?roomId="+c));return i.state={myName:s,estimaters:[],isOend:!1,socket:o},i.handleSelectionCardClick=i.handleSelectionCardClick.bind(Object(a.a)(i)),i.handleOpenButtonClick=i.handleOpenButtonClick.bind(Object(a.a)(i)),i}return Object(i.a)(n,[{key:"getSetupedRoomId",value:function(){var e,t=window.location.search;if(t)e=t.substring(1);else{var n=Object(d.a)();window.location.hash=n,window.history.replaceState("","","?"+n),e=n}return e}},{key:"componentDidMount",value:function(){var e=this;this.state.socket.on("do event",(function(t){var n=e.eventSubscribers[t.type];n&&n(t)}))}},{key:"handleOpenButtonClick",value:function(){var e=0!==this.state.estimaters.length&&!this.state.isOpend?"open":"return";this.state.socket.emit("do event",{type:e})}},{key:"handleSelectionCardClick",value:function(e){var t=this,n=this.state.estimaters.find((function(e){return e.name===t.state.myName})),a=n&&n.point===e,r=this.state.estimaters.slice();if(a)r=this.state.estimaters.filter((function(e){return e.name!==t.state.myName}));else{var i=r.find((function(e){return e.name===t.state.myName}));i||(i={name:this.state.myName},r[r.length]=i),i.point=e}var s=a?"unselect":"select";this.state.socket.emit("do event",{type:s,name:this.state.myName,point:e})}},{key:"render",value:function(){var e=this,t=this.state.estimaters.find((function(t){return t.name===e.state.myName}));return l.a.createElement("div",null,l.a.createElement("h1",null,"Planning Poker"),l.a.createElement(b,{estimaters:this.state.estimaters,isOpend:this.state.isOpend,handleOpenButtonClick:this.handleOpenButtonClick}),l.a.createElement(O,{name:this.state.myName}),l.a.createElement(f,{mySelectedPoint:t?t.point:void 0,handleSelectionCardClick:this.handleSelectionCardClick}))}}]),n}(l.a.Component);p.a.render(l.a.createElement(j,null),document.getElementById("root"))},18:function(e,t,n){},9:function(e,t,n){e.exports=n(10)}},[[9,1,2]]]);
//# sourceMappingURL=main.d538dd13.chunk.js.map