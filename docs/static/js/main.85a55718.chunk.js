(this["webpackJsonpplanning-poker"]=this["webpackJsonpplanning-poker"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),s=n(6),c=n.n(s),r=n(7),o=n(8),l=n(4),d=n(11),u=n(10),m=n(31),p=n(2),h=n(3),O=(n(16),n(0)),j=["size","point","isSelectable","isSelected","isClosed","handleClick"],b=function(e){var t=e.size,n=e.point,i=e.isSelectable,a=e.isSelected,s=e.isClosed,c=e.handleClick,r=Object(p.a)(e,j);return Object(O.jsx)("div",Object(h.a)(Object(h.a)({className:["card","card-"+t,i?"card-selectable":"",a?"card-selected":"",s?"card-closed":""].join(" "),onClick:function(){return c(n)}},r),{},{children:s?"":n}))};b.defaultProps={size:"medium",point:0,isSelectable:!1,isSelected:!1,isClosed:!1,handleClick:function(){}};n(18);var f=["isOpend","point","name"],v=function(e){var t=e.isOpend,n=e.point,i=e.name;Object(p.a)(e,f);return Object(O.jsxs)("div",{className:"estimate",children:[Object(O.jsx)(b,{isSelectable:!1,isClosed:!t,size:"large",point:t?String(n):""}),Object(O.jsx)("div",{className:"estimate-name",children:i})]})};v.defaultProps={};n(19);var C=function(e){var t=e.isOpend,n=e.handleClick;return Object(O.jsx)("div",{className:"openbutton",onClick:n,children:t?"return":"open"})};C.defaultProps={isOpend:!1};var k=n(9),S=(n(23),function(e){var t=e.text;return Object(O.jsx)(k.CopyToClipboard,{text:t,children:Object(O.jsx)("div",{className:"copybutton",children:"Copy"})})});S.defaultProps={text:void 0};n(24);var x=["isOpend","estimaters","handleOpenButtonClick"],y=function(e){var t=e.isOpend,n=e.estimaters,i=e.handleOpenButtonClick;Object(p.a)(e,x);return Object(O.jsxs)("div",{className:"table",children:[Object(O.jsx)("div",{className:"table-estimaters",children:Array.isArray(n)?n.map((function(e){return Object(O.jsx)(v,{name:e.name,point:e.point,isOpend:t},e.name)})):void 0}),Object(O.jsx)(C,{isOpend:t,handleClick:i}),t&&n&&n.length>0?Object(O.jsx)(S,{text:g(n)}):null]})};function g(e){if(!e||0===e.length)return"empty.";var t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+e.sort((function(e,t){return e.name>t.name?1:-1})).reduce((function(e,t){return(e?e+" ":"")+"".concat(t.name,"(").concat(t.point,")")}),null)}y.defaultProps={};n(25);var N=["name"],w=function(e){var t=e.name,n=Object(p.a)(e,N);return Object(O.jsx)("div",Object(h.a)(Object(h.a)({className:"user"},n),{},{children:t}))};w.defaultProps={name:""};n(26);var P=["selectedPoint","handleCardClick"],B=["0","1","2","3","5","8","13","21","34","55","?","\u221e"],z=function(e){var t=e.selectedPoint,n=e.handleCardClick;Object(p.a)(e,P);return Object(O.jsx)("div",{className:"card-selection",children:B.map((function(e){return Object(O.jsx)(b,{isSelectable:!0,isSelected:t===e,point:String(e),handleClick:n},e)}))})};z.defaultProps={selectedPoint:""};n(27);var I=["userName","isOpend","estimaters","handleOpenButtonClick","handleSelectionCardClick"],D=function(e){var t=e.userName,n=e.isOpend,i=e.estimaters,a=e.handleOpenButtonClick,s=e.handleSelectionCardClick,c=(Object(p.a)(e,I),i?i.find((function(e){return e.name===t})):void 0);return Object(O.jsx)("div",{className:"page",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Planning Poker"}),Object(O.jsx)(y,{estimaters:i,isOpend:n,handleOpenButtonClick:a}),Object(O.jsx)(w,{name:t}),Object(O.jsx)(z,{selectedPoint:c?c.point:void 0,handleCardClick:s})]})})};D.defaultProps={};n(28);var A=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(r.a)(this,n),(i=t.call(this,e)).eventSubscribers={select:function(e){var t=i.state.estimaters.slice(),n=t.find((function(t){return t.name===e.name}));n||(n={name:e.name},t[t.length]=n),n.point=String(e.point),i.setState({estimaters:t})},unselect:function(e){var t=i.state.estimaters.filter((function(t){return t.name!==e.name}));i.setState({estimaters:t})},open:function(e){i.setState({isOpend:!0})},return:function(e){i.setState({estimaters:[],isOpend:!1})}};for(var a=void 0;!a;)a=window.prompt("your name");var s,c=(s=i.getSetupedRoomId(),window.io("https://simple-websocket-server.herokuapp.com/?roomId="+s));return i.state={myName:a,estimaters:[],isOend:!1,socket:c},i.handleSelectionCardClick=i.handleSelectionCardClick.bind(Object(l.a)(i)),i.handleOpenButtonClick=i.handleOpenButtonClick.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"getSetupedRoomId",value:function(){var e,t=window.location.search;if(t)e=t.substring(1);else{var n=Object(m.a)();window.location.hash=n,window.history.replaceState("","","?"+n),e=n}return e}},{key:"componentDidMount",value:function(){var e=this;this.state.socket.on("do event",(function(t){var n=e.eventSubscribers[t.type];n&&n(t)}))}},{key:"handleOpenButtonClick",value:function(){var e=0!==this.state.estimaters.length&&!this.state.isOpend?"open":"return";this.state.socket.emit("do event",{type:e})}},{key:"handleSelectionCardClick",value:function(e){var t=this,n=this.state.estimaters.find((function(e){return e.name===t.state.myName})),i=n&&n.point===e,a=this.state.estimaters.slice();if(i)a=this.state.estimaters.filter((function(e){return e.name!==t.state.myName}));else{var s=a.find((function(e){return e.name===t.state.myName}));s||(s={name:this.state.myName},a[a.length]=s),s.point=String(e)}var c=i?"unselect":"select";this.state.socket.emit("do event",{type:c,name:this.state.myName,point:String(e)})}},{key:"render",value:function(){return Object(O.jsx)(D,{userName:this.state.myName,isOpend:this.state.isOpend,estimaters:this.state.estimaters,handleOpenButtonClick:this.handleOpenButtonClick,handleSelectionCardClick:this.handleSelectionCardClick})}}]),n}(a.a.Component);c.a.render(Object(O.jsx)(A,{}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.85a55718.chunk.js.map