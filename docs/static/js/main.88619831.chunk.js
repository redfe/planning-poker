(this["webpackJsonpplanning-poker"]=this["webpackJsonpplanning-poker"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var i=n(6),a=n(2),s=n(3),r=n(5),c=n(4),o=n(1),u=n.n(o),p=n(8),l=n.n(p),d=n(9),h=n(20),m=(n(18),n(0)),j=["0","1","2","3","5","8","13","21","34","55","?","\u221e"],O=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.point,t="card"+(this.props.isSelected?" selected":"");return Object(m.jsx)("div",{className:t,onClick:this.props.handleClick,children:e})}}]),n}(u.a.Component),b=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=j.map((function(t){var n=e.props.mySelectedPoint===t;return Object(m.jsx)(O,{isSelected:n,point:t,handleClick:function(){return e.props.handleSelectionCardClick(t)}},t)}));return Object(m.jsx)("div",{className:"selection",children:t})}}]),n}(u.a.Component),v=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"user",children:this.props.name})}}]),n}(u.a.Component),f=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"createCopyText",value:function(){var e=this.props.estimaters;if(0===e.length)return"empty.";var t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+e.sort((function(e,t){return e.name>t.name?1:-1})).reduce((function(e,t){return(e?e+" ":"")+"".concat(t.name,"(").concat(t.point,")")}),null)}},{key:"render",value:function(){var e=this,t=this.props.isOpend,n=this.props.estimaters.map((function(e){return Object(m.jsx)(y,{name:e.name,point:e.point,isOpend:t},e.name)}));return Object(m.jsxs)("div",{className:"table",children:[Object(m.jsx)("div",{className:"estimaters",children:n}),Object(m.jsx)(C,{isOpend:t,handleClick:function(){return e.props.handleOpenButtonClick()}}),t&&n.length>0?Object(m.jsx)(k,{text:this.createCopyText()}):null]})}}]),n}(u.a.Component),k=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(m.jsx)(d.CopyToClipboard,{text:this.props.text,children:Object(m.jsx)("div",{className:"copy-button",children:"Copy"})})}}]),n}(u.a.Component),y=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.isOpend?this.props.point:void 0,t="estimater "+(this.props.isOpend?"opend":"closed");return Object(m.jsxs)("div",{className:t,children:[Object(m.jsx)(O,{point:e}),Object(m.jsx)("div",{className:"estimater-name",children:this.props.name})]})}}]),n}(u.a.Component),C=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"open-button",onClick:function(){return e.props.handleClick()},children:this.props.isOpend?"return":"open"})}}]),n}(u.a.Component),x=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;Object(a.a)(this,n),(s=t.call(this,e)).eventSubscribers={select:function(e){var t=s.state.estimaters.slice(),n=t.find((function(t){return t.name===e.name}));n||(n={name:e.name},t[t.length]=n),n.point=e.point,s.setState({estimaters:t})},unselect:function(e){var t=s.state.estimaters.filter((function(t){return t.name!==e.name}));s.setState({estimaters:t})},open:function(e){s.setState({isOpend:!0})},return:function(e){s.setState({estimaters:[],isOpend:!1})}};for(var r=void 0;!r;)r=window.prompt("your name");var c,o=(c=s.getSetupedRoomId(),window.io("https://simple-websocket-server.herokuapp.com/?roomId="+c));return s.state={myName:r,estimaters:[],isOend:!1,socket:o},s.handleSelectionCardClick=s.handleSelectionCardClick.bind(Object(i.a)(s)),s.handleOpenButtonClick=s.handleOpenButtonClick.bind(Object(i.a)(s)),s}return Object(s.a)(n,[{key:"getSetupedRoomId",value:function(){var e,t=window.location.search;if(t)e=t.substring(1);else{var n=Object(h.a)();window.location.hash=n,window.history.replaceState("","","?"+n),e=n}return e}},{key:"componentDidMount",value:function(){var e=this;this.state.socket.on("do event",(function(t){var n=e.eventSubscribers[t.type];n&&n(t)}))}},{key:"handleOpenButtonClick",value:function(){var e=0!==this.state.estimaters.length&&!this.state.isOpend?"open":"return";this.state.socket.emit("do event",{type:e})}},{key:"handleSelectionCardClick",value:function(e){var t=this,n=this.state.estimaters.find((function(e){return e.name===t.state.myName})),i=n&&n.point===e,a=this.state.estimaters.slice();if(i)a=this.state.estimaters.filter((function(e){return e.name!==t.state.myName}));else{var s=a.find((function(e){return e.name===t.state.myName}));s||(s={name:this.state.myName},a[a.length]=s),s.point=e}var r=i?"unselect":"select";this.state.socket.emit("do event",{type:r,name:this.state.myName,point:e})}},{key:"render",value:function(){var e=this,t=this.state.estimaters.find((function(t){return t.name===e.state.myName}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Planning Poker"}),Object(m.jsx)(f,{estimaters:this.state.estimaters,isOpend:this.state.isOpend,handleOpenButtonClick:this.handleOpenButtonClick}),Object(m.jsx)(v,{name:this.state.myName}),Object(m.jsx)(b,{mySelectedPoint:t?t.point:void 0,handleSelectionCardClick:this.handleSelectionCardClick})]})}}]),n}(u.a.Component);l.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))},18:function(e,t,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.88619831.chunk.js.map